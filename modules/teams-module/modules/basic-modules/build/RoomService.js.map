{"version":3,"file":"RoomService.js","mappings":"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","sources":["webpack://axolotis-module-basic/webpack/universalModuleDefinition","webpack://axolotis-module-basic/./node_modules/axios/index.js","webpack://axolotis-module-basic/./node_modules/axios/lib/adapters/xhr.js","webpack://axolotis-module-basic/./node_modules/axios/lib/axios.js","webpack://axolotis-module-basic/./node_modules/axios/lib/cancel/Cancel.js","webpack://axolotis-module-basic/./node_modules/axios/lib/cancel/CancelToken.js","webpack://axolotis-module-basic/./node_modules/axios/lib/cancel/isCancel.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/Axios.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/InterceptorManager.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/buildFullPath.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/createError.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/dispatchRequest.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/enhanceError.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/mergeConfig.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/settle.js","webpack://axolotis-module-basic/./node_modules/axios/lib/core/transformData.js","webpack://axolotis-module-basic/./node_modules/axios/lib/defaults.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/bind.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/buildURL.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/combineURLs.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/cookies.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/spread.js","webpack://axolotis-module-basic/./node_modules/axios/lib/helpers/validator.js","webpack://axolotis-module-basic/./node_modules/axios/lib/utils.js","webpack://axolotis-module-basic/./src/lib/index.ts","webpack://axolotis-module-basic/./src/lib/phoenixAuth/phoenix-utils.ts","webpack://axolotis-module-basic/./src/lib/roomAPI/hub-utils.ts","webpack://axolotis-module-basic/./src/lib/roomAPI/RoomService.ts","webpack://axolotis-module-basic/./src/lib/roomAPI/PropertiesFormat.ts","webpack://axolotis-module-basic/./src/lib/store/Store.ts","webpack://axolotis-module-basic/./node_modules/deepmerge/dist/cjs.js","webpack://axolotis-module-basic/./node_modules/jsonschema/lib/attribute.js","webpack://axolotis-module-basic/./node_modules/jsonschema/lib/helpers.js","webpack://axolotis-module-basic/./node_modules/jsonschema/lib/index.js","webpack://axolotis-module-basic/./node_modules/jsonschema/lib/scan.js","webpack://axolotis-module-basic/./node_modules/jsonschema/lib/validator.js","webpack://axolotis-module-basic/./node_modules/uuid/lib/bytesToUuid.js","webpack://axolotis-module-basic/./node_modules/uuid/lib/rng-browser.js","webpack://axolotis-module-basic/./node_modules/uuid/v4.js","webpack://axolotis-module-basic/../../node_modules/querystring/decode.js","webpack://axolotis-module-basic/../../node_modules/querystring/encode.js","webpack://axolotis-module-basic/../../node_modules/querystring/index.js","webpack://axolotis-module-basic/../../node_modules/url/node_modules/punycode/punycode.js","webpack://axolotis-module-basic/../../node_modules/url/url.js","webpack://axolotis-module-basic/../../node_modules/url/util.js","webpack://axolotis-module-basic/external umd2 \"@aptero/axolotis-player\"","webpack://axolotis-module-basic/webpack/bootstrap","webpack://axolotis-module-basic/webpack/runtime/compat get default export","webpack://axolotis-module-basic/webpack/runtime/define property getters","webpack://axolotis-module-basic/webpack/runtime/global","webpack://axolotis-module-basic/webpack/runtime/hasOwnProperty shorthand","webpack://axolotis-module-basic/webpack/runtime/make namespace object","webpack://axolotis-module-basic/webpack/runtime/node module decorator","webpack://axolotis-module-basic/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@aptero/axolotis-player\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"axolotis-module-basic\", [\"@aptero/axolotis-player\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"axolotis-module-basic\"] = factory(require(\"@aptero/axolotis-player\"));\n\telse\n\t\troot[\"axolotis-module-basic\"] = factory(root[\"@aptero/axolotis-player\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__12__) => {\nreturn ","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n    var responseType = config.responseType;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n        request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(\n        timeoutErrorMessage,\n        config,\n        config.transitional && config.transitional.clarifyTimeoutError ? 'ETIMEDOUT' : 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\nvar validator = require('../helpers/validator');\n\nvar validators = validator.validators;\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  var transitional = config.transitional;\n\n  if (transitional !== undefined) {\n    validator.assertOptions(transitional, {\n      silentJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      forcedJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      clarifyTimeoutError: validators.transitional(validators.boolean, '1.0.0')\n    }, false);\n  }\n\n  // filter out skipped interceptors\n  var requestInterceptorChain = [];\n  var synchronousRequestInterceptors = true;\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n      return;\n    }\n\n    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var responseInterceptorChain = [];\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var promise;\n\n  if (!synchronousRequestInterceptors) {\n    var chain = [dispatchRequest, undefined];\n\n    Array.prototype.unshift.apply(chain, requestInterceptorChain);\n    chain = chain.concat(responseInterceptorChain);\n\n    promise = Promise.resolve(config);\n    while (chain.length) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n\n    return promise;\n  }\n\n\n  var newConfig = config;\n  while (requestInterceptorChain.length) {\n    var onFulfilled = requestInterceptorChain.shift();\n    var onRejected = requestInterceptorChain.shift();\n    try {\n      newConfig = onFulfilled(newConfig);\n    } catch (error) {\n      onRejected(error);\n      break;\n    }\n  }\n\n  try {\n    promise = dispatchRequest(newConfig);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n\n  while (responseInterceptorChain.length) {\n    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n    synchronous: options ? options.synchronous : false,\n    runWhen: options ? options.runWhen : null\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar defaults = require('./../defaults');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  var context = this || defaults;\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(context, data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\nvar enhanceError = require('./core/enhanceError');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nvar defaults = {\n\n  transitional: {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false\n  },\n\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data) || (headers && headers['Content-Type'] === 'application/json')) {\n      setContentTypeIfUnset(headers, 'application/json');\n      return stringifySafely(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    var transitional = this.transitional;\n    var silentJSONParsing = transitional && transitional.silentJSONParsing;\n    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    var strictJSONParsing = !silentJSONParsing && this.responseType === 'json';\n\n    if (strictJSONParsing || (forcedJSONParsing && utils.isString(data) && data.length)) {\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw enhanceError(e, this, 'E_JSON_PARSE');\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar pkg = require('./../../package.json');\n\nvar validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nvar deprecatedWarnings = {};\nvar currentVerArr = pkg.version.split('.');\n\n/**\n * Compare package versions\n * @param {string} version\n * @param {string?} thanVersion\n * @returns {boolean}\n */\nfunction isOlderVersion(version, thanVersion) {\n  var pkgVersionArr = thanVersion ? thanVersion.split('.') : currentVerArr;\n  var destVer = version.split('.');\n  for (var i = 0; i < 3; i++) {\n    if (pkgVersionArr[i] > destVer[i]) {\n      return true;\n    } else if (pkgVersionArr[i] < destVer[i]) {\n      return false;\n    }\n  }\n  return false;\n}\n\n/**\n * Transitional option validator\n * @param {function|boolean?} validator\n * @param {string?} version\n * @param {string} message\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  var isDeprecated = version && isOlderVersion(version);\n\n  function formatMessage(opt, desc) {\n    return '[Axios v' + pkg.version + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return function(value, opt, opts) {\n    if (validator === false) {\n      throw new Error(formatMessage(opt, ' has been removed in ' + version));\n    }\n\n    if (isDeprecated && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new TypeError('options must be an object');\n  }\n  var keys = Object.keys(options);\n  var i = keys.length;\n  while (i-- > 0) {\n    var opt = keys[i];\n    var validator = schema[opt];\n    if (validator) {\n      var value = options[opt];\n      var result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new TypeError('option ' + opt + ' must be ' + result);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw Error('Unknown option ' + opt);\n    }\n  }\n}\n\nmodule.exports = {\n  isOlderVersion: isOlderVersion,\n  assertOptions: assertOptions,\n  validators: validators\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","export * from \"./properties/Properties\";\nexport * from \"./nameGeneration/NameGenerationService\";\nexport * from \"./phoenixAuth/PhoenixAuthService\";\nexport * from \"./phoenixAuth/MsToNativeLoginBridge\";\nexport * from \"./common/AuthInterface\";\nexport * from \"./roomAPI/RoomService\";\nexport * from \"./store/CookieStore\";\nexport * from \"./store/Store\";\n\n//NOTE the ids are duplicated in the src import helper\nexport const PROPERTIES_SERVICE = \"@aptero/axolotis-module-properties/Properties\";\nexport const STORE_SERVICE = \"@aptero/axolotis-module-storage/Store\";\nexport const COOKIE_STORE_SERVICE = \"@aptero/axolotis-module-storage/CookieStore\";\nexport const PHX_AUTH_SERVICE = \"@aptero/axolotis-module-phx-auth/PhoenixAuthService\";\nexport const NAME_SERVICE = \"@aptero/axolotis-module-name/NameService\";\nexport const ROOM_SERVICE = \"@aptero/axolotis-module-room/RoomService\";\n","import { Socket } from \"phoenix\";\n\nimport { sleep } from \"@root/phoenixAuth/async-utils\";\nimport { generateHubName } from \"@root/nameGeneration/name-generation\";\nimport { PROPERTIES_SERVICE, STORE_SERVICE } from \"@root/index\";\nimport { PropertiesFormat } from \"@root/phoenixAuth/PropertiesFormat\";\nimport { getService, getServiceSync } from \"@aptero/axolotis-player\";\nimport { Store } from \"@root/store/Store\";\nimport { Properties } from \"@root/properties/Properties\";\n\nexport function config() {\n  return getServiceSync<Properties>(PROPERTIES_SERVICE).getGlobalProperties<PropertiesFormat>();\n}\n\nexport function hasReticulumServer() {\n  return !!config().RETICULUM_SERVER;\n}\n\nexport function isLocalClient() {\n  return hasReticulumServer() && document.location.host !== config().RETICULUM_SERVER;\n}\n\nexport function hubUrl(hubId, extraParams: any, slug) {\n  if (!hubId) {\n    if (isLocalClient()) {\n      hubId = new URLSearchParams(location.search).get(\"hub_id\");\n    } else {\n      hubId = location.pathname.split(\"/\")[1];\n    }\n  }\n\n  let url;\n  if (isLocalClient()) {\n    url = new URL(`/hub.html`, location.href);\n    url.searchParams.set(\"hub_id\", hubId);\n  } else {\n    const maybeSlug = slug ? `/${slug}` : \"\";\n    url = new URL(`/${hubId}${maybeSlug}`, location.href);\n  }\n\n  for (const key in extraParams) {\n    if (extraParams[key]) {\n      url.searchParams.set(key, extraParams[key]);\n    }\n  }\n\n  return url;\n}\n\nconst resolverLink = document.createElement(\"a\");\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\n  if (host || hasReticulumServer()) {\n    return `https://${host || config().RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\"),\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async (res) => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nlet directReticulumHostAndPort;\n\nasync function refreshDirectReticulumHostAndPort() {\n  const qs = new URLSearchParams(location.search);\n  let host = qs.get(\"phx_host\");\n  const reticulumMeta = await getReticulumMeta();\n  host = host || config().RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n  const port = qs.get(\"phx_port\") || (hasReticulumServer() ? new URL(`${document.location.protocol}//${config().RETICULUM_SERVER}`).port : \"443\");\n  directReticulumHostAndPort = { host, port };\n}\n\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\n  if (!directReticulumHostAndPort) {\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\n    return getReticulumFetchUrl(path, absolute);\n  }\n\n  const { host, port } = directReticulumHostAndPort;\n  return getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    await refreshDirectReticulumHostAndPort();\n    const { host, port } = directReticulumHostAndPort;\n    const protocol = qs.get(\"phx_protocol\") || config().RETICULUM_SOCKET_PROTOCOL || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings: any = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = getServiceSync<Store>(STORE_SERVICE).state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params: any = {\n    headers: { \"content-type\": \"application/json\" },\n    method,\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params)\n    .then(async (response) => {\n      if (!response.ok) {\n        throw new Error(\"API error\");\n      }\n      const result = await response.text();\n      try {\n        return JSON.parse(result);\n      } catch (e) {\n        // Some reticulum responses, particularly DELETE requests, don't return json.\n        return result;\n      }\n    })\n    .catch(() => {\n      return { entries: [] };\n    });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload: any = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  }\n\n  const headers: any = { \"content-type\": \"application/json\" };\n  const store = await getService<Store>(STORE_SERVICE);\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\",\n  }).then((r) => r.json());\n\n  if (res.error === \"invalid_token\") {\n    console.log(\"created anonymously\");\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\",\n    }).then((r) => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({\n      creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }],\n    });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({\n        embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }],\n      });\n    }\n  }\n\n  if (isLocalClient()) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence: any = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\nfunction migrateBindings(oldChannel, newChannel) {\n  const doNotDuplicate = [\"phx_close\", \"phx_error\", \"phx_reply\", \"presence_state\", \"presence_diff\"];\n  const shouldDuplicate = (event) => {\n    return !event.startsWith(\"chan_reply_\") && !doNotDuplicate.includes(event);\n  };\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    if (shouldDuplicate(item.event)) {\n      newChannel.bindings.push(item);\n    }\n  }\n  newChannel.bindingRef = oldChannel.bindingRef;\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  migrateBindings(oldChannel, channel);\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise((resolve) => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function migrateToChannel(oldChannel, newChannel) {\n  migrateBindings(oldChannel, newChannel);\n\n  return new Promise((resolve, reject) => {\n    newChannel\n      .join()\n      .receive(\"ok\", (data) => {\n        oldChannel.leave();\n        oldChannel.bindings = [];\n        resolve(data);\n      })\n      .receive(\"error\", (data) => {\n        newChannel.leave();\n        reject(data);\n      });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences) as any) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(\n          channels,\n          m.profile.discordBridges.map((b) => b.channel.name)\n        );\n      }\n    }\n  }\n  return channels;\n}\n\nexport function hasEmbedPresences(presences) {\n  for (const p of Object.values(presences) as any) {\n    for (const m of p.metas) {\n      if (m.context && m.context.embed) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function denoisePresence({ onJoin, onLeave, onChange }) {\n  return {\n    rawOnJoin: (key, beforeJoin, afterJoin) => {\n      if (beforeJoin === undefined) {\n        onJoin(key, afterJoin.metas[0]);\n      }\n    },\n    rawOnLeave: (key, remaining, removed) => {\n      if (remaining.metas.length === 0) {\n        onLeave(key, removed.metas[0]);\n      } else {\n        onChange(key, removed.metas[removed.metas.length - 1], remaining.metas[remaining.metas.length - 1]);\n      }\n    },\n  };\n}\n\nexport function presenceEventsForHub(events) {\n  const onJoin = (key, meta) => {\n    events.trigger(`hub:join`, { key, meta });\n  };\n  const onLeave = (key, meta) => {\n    events.trigger(`hub:leave`, { key, meta });\n  };\n  const onChange = (key, previous, current) => {\n    events.trigger(`hub:change`, { key, previous, current });\n  };\n  return {\n    onJoin,\n    onLeave,\n    onChange,\n  };\n}\n\nexport const tryGetMatchingMeta = async ({ ret_pool, ret_version }, shouldAbandonMigration) => {\n  const backoffMS = 5000;\n  const randomMS = 15000;\n  const maxAttempts = 10;\n  let didMatchMeta = false;\n  let attempt = 0;\n  while (!didMatchMeta && attempt < maxAttempts && !shouldAbandonMigration()) {\n    try {\n      // Add randomness to the first request avoid flooding reticulum.\n      const delayMS = attempt * backoffMS + (attempt === 0 ? Math.random() * randomMS : 0);\n      console.log(`[reconnect] Getting reticulum meta in ${Math.ceil(delayMS / 1000)} seconds.${attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"}`);\n      await sleep(delayMS);\n      invalidateReticulumMeta();\n      console.log(`[reconnect] Getting reticulum meta.${attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"}`);\n      const { pool, version } = await getReticulumMeta();\n      didMatchMeta = ret_pool === pool && ret_version === version;\n    } catch {\n      didMatchMeta = false;\n    }\n\n    attempt = attempt + 1;\n  }\n  return didMatchMeta;\n};\n","export function createHubChannelParams({ permsToken, profile, pushSubscriptionEndpoint, isMobile, isMobileVR, isEmbed, hubInviteId, authToken }) {\n  return {\n    profile,\n    push_subscription_endpoint: pushSubscriptionEndpoint,\n    auth_token: authToken || null,\n    perms_token: permsToken || null,\n    context: {\n      mobile: isMobile || isMobileVR,\n      embed: isEmbed,\n      hmd: isMobileVR,\n    },\n    hub_invite_id: hubInviteId,\n  };\n}\n","import axios from \"axios\";\nimport { COOKIE_STORE_SERVICE, NAME_SERVICE, PHX_AUTH_SERVICE, PROPERTIES_SERVICE, STORE_SERVICE } from \"@root/index\";\nimport { PropertiesFormat, PROPERTY_KEY } from \"@root/roomAPI/PropertiesFormat\";\nimport { IService, IServices, Service } from \"@aptero/axolotis-player\";\nimport { createHubChannelParams } from \"./hub-utils\";\n\nimport { Properties } from \"@root/properties/Properties\";\nimport { NameGenerationService } from \"@root/nameGeneration/NameGenerationService\";\nimport { Store } from \"@root/store/Store\";\nimport { PhoenixAuthService } from \"@root/phoenixAuth/PhoenixAuthService\";\nimport { CookieStore } from \"@root/store/CookieStore\";\nimport { config } from \"@root/phoenixAuth/phoenix-utils\";\n\ndeclare const window;\n\nexport class RoomServiceFactory implements Service<RoomService> {\n  async createService(services: IServices): Promise<RoomService> {\n    return new RoomService(\n      await services.getService<PhoenixAuthService>(PHX_AUTH_SERVICE),\n      await services.getService<Store>(STORE_SERVICE),\n      await services.getService<Properties>(PROPERTIES_SERVICE),\n      await services.getService<NameGenerationService>(NAME_SERVICE),\n      await services.getService<CookieStore>(COOKIE_STORE_SERVICE)\n    );\n  }\n}\n\nexport class RoomService implements IService {\n  public static dependencies: string[] = [PHX_AUTH_SERVICE, STORE_SERVICE, PROPERTIES_SERVICE, NAME_SERVICE, COOKIE_STORE_SERVICE];\n\n  constructor(\n    private phoenixAuthService: PhoenixAuthService,\n    private store: Store,\n    private properties: Properties,\n    private nameService: NameGenerationService,\n    private cookie: CookieStore\n  ) {}\n\n  getType(): string {\n    return RoomService.name;\n  }\n\n  parseUrl(url) {\n    //https://alphahub.aptero.co/fTj63Hg/room?msteams=true&embed_token=846d38e7d0bc3c49716f5f5cb2577ff8\n    let urlObj = new URL(url);\n\n    if (urlObj.origin.startsWith(\"https://localhost\")) {\n      return {\n        origin: urlObj.origin,\n        roomSID: urlObj.searchParams.get(\"hub_id\"),\n      };\n    } else {\n      return {\n        origin: urlObj.origin,\n        roomSID: urlObj.pathname.split(\"/\")[1],\n      };\n    }\n  }\n\n  createAndRedirectToNewHub(a, b, c) {\n    return this.phoenixAuthService.createAndRedirectToNewHub(a, b, c);\n  }\n\n  async getLinkFromCode(code: string) {\n    const url = \"https://\" + config().RETICULUM_SERVER + \"/link/\" + code;\n    const res = await fetch(url);\n    console.log(res);\n    console.log(res.headers.get(\"location\"));\n    if (res.status >= 400) {\n      console.error(res);\n      throw new Error(\"wrong status\");\n    } else {\n      return res.headers.get(\"location\");\n    }\n  }\n\n  async getEmbedToken(roomSID, origin) {\n    if (window.location.origin.startsWith(\"https://localhost\")) {\n      let conf = this.properties.get<PropertiesFormat>(PROPERTY_KEY);\n      origin = conf.ROOM_TOKEN_SERVICE || window.location.origin;\n    }\n    let res = await axios.get(origin + \"/service/room/\" + \"room/\" + roomSID + \"/embed/token\");\n    return res.data;\n  }\n\n  fetchSpokeProject(userId) {\n    return (cursor) => {\n      if (userId) {\n        //https://alphahub.aptero.co/api/v1/media/search?filter=my-scenes&source=scenes&user=640407050966269961\n        return this.phoenixAuthService.fetchReticulumAuthenticated(`/api/v1/media/search?filter=my-scenes&source=scenes&user=${userId}&cursor=${cursor}`);\n      } else {\n        return Promise.reject(new Error(\"Not signed in\"));\n      }\n    };\n  }\n\n  fetchFavoriteRoom(userId) {\n    return (cursor) => {\n      if (userId) {\n        return this.phoenixAuthService.fetchReticulumAuthenticated(`/api/v1/media/search?source=favorites&type=rooms&user=${userId}&cursor=${cursor}`);\n      } else {\n        return Promise.reject(new Error(\"Not signed in\"));\n      }\n    };\n  }\n\n  async setFavorite(hubId) {\n    if (!this.store.state.credentials.token) {\n      //the user is not logged in so we cannot set favourite\n      return;\n    }\n    const socket = await this.phoenixAuthService.connectToReticulum(false);\n    socket.onClose(() => {});\n    // Reticulum global channel\n    window.APP.retChannel = socket.channel(`ret`, { hub_id: hubId });\n    this.phoenixAuthService.setGlobalReticulumChannel(window.APP.retChannel);\n    window.APP.retChannel\n      .join()\n      .receive(\"ok\", () => {\n        const OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\n        const oauthFlowPermsToken = this.cookie.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n        if (oauthFlowPermsToken) {\n          this.cookie.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n        }\n        const hubChannelParamsForPermsToken = (permsToken) => {\n          return createHubChannelParams({\n            profile: this.store.state.profile,\n            pushSubscriptionEndpoint: null,\n            permsToken,\n            isMobile: false,\n            isMobileVR: false,\n            isEmbed: false,\n            hubInviteId: null,\n            authToken: this.store.state.credentials && this.store.state.credentials.token,\n          });\n        };\n        const hubPhxChannel = socket.channel(`hub:${hubId}`, hubChannelParamsForPermsToken(oauthFlowPermsToken));\n        hubPhxChannel\n          .join()\n          .receive(\"ok\", async () => {\n            hubPhxChannel.push(\"favorite\", {});\n          })\n          .receive(\"error\", (res) => {\n            console.error(res);\n          });\n      })\n      .receive(\"error\", (res) => {\n        console.error(res);\n      });\n  }\n\n  async createAndSelect(sceneId, name = undefined) {\n    const createUrl = this.phoenixAuthService.getReticulumFetchUrl(\"/api/v1/hubs\");\n    const payload: any = { hub: { name: name || this.nameService.generateHubName() } };\n\n    if (sceneId) {\n      payload.hub.scene_id = sceneId;\n    }\n\n    const headers: any = { \"content-type\": \"application/json\" };\n    const store = this.store;\n    if (store.state && store.state.credentials.token) {\n      headers.authorization = `bearer ${store.state.credentials.token}`;\n    }\n\n    let res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\",\n    }).then((r) => r.json());\n\n    if (res.error === \"invalid_token\") {\n      // Clear the invalid token from store.\n      store.update({ credentials: { token: null, email: null } });\n\n      // Create hub anonymously\n      delete headers.authorization;\n      res = await fetch(createUrl, {\n        body: JSON.stringify(payload),\n        headers,\n        method: \"POST\",\n      }).then((r) => r.json());\n    }\n\n    const hub = res;\n    let url = hub.url;\n\n    /*const creatorAssignmentToken = hub.creator_assignment_token;\n        if (creatorAssignmentToken) {\n          store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n          // Don't need to store the embed token if there's no creator assignment token, since that means\n          // we are the owner and will get the embed token on page load.\n          const embedToken = hub.embed_token;\n\n          if (embedToken) {\n            store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n          }\n        }*/\n\n    if (this.phoenixAuthService.isLocalClient()) {\n      url = window.location.origin + `/hub.html?hub_id=${hub.hub_id}`;\n    }\n    this.setFavorite(hub.hub_id);\n    return url;\n  }\n\n  createRoomEntry(name, sceneid, imageUrl) {\n    return {\n      allow_remixing: false,\n      attributions: {\n        content: [\n          {\n            title: \"Salle\",\n          },\n          {\n            title: \"Image\",\n          },\n          {\n            title: \"Image 1\",\n          },\n          {\n            title: \"Video\",\n          },\n        ],\n        creator: \"\",\n      },\n      description: null,\n      id: sceneid, //\"EW4e3CG\"\n      images: {\n        preview: {\n          url: imageUrl, //\"https://alphahub.aptero.co/files/cb50c02d-585a-4feb-8461-e6d8cd34b656.jpg\"\n        },\n      },\n      name: name,\n      project_id: \"XXXXX\",\n      type: \"scene\",\n      url: window.location.origin + \"/\" + sceneid,\n    };\n  }\n}\n","export const PROPERTY_KEY = \"@aptero/axolotis-module-room\";\nexport interface PropertiesFormat {\n  ROOM_TOKEN_SERVICE: string;\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { IService } from \"@aptero/axolotis-player\";\n\n//TODO SCHEMA add function to update schema by component\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9_~ -]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        //aptero\n        companyName: { type: \"string\" },\n        jobTitleName: { type: \"string\" },\n        phoneNumber: { type: \"string\" },\n        description: { type: \"string\" },\n        profilePicture: { type: \"string\" },\n        microsoftUserprofilePicture: { type: \"string\" },\n        microsoftUser: { type: \"string\" },\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\n        personalAvatarId: { type: \"string\" },\n      },\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] },\n      },\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        hasChangedPicture: { type: \"boolean\" },\n        hasChangedAvatar: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" },\n      },\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" },\n        micMuted: { type: \"bool\" },\n      },\n    },\n\n    preferences: {\n      type: \"object\",\n      // Allow removed preferences to pass validation\n      additionalProperties: true,\n      properties: {\n        shouldPromptForRefresh: { type: \"bool\" },\n        preferredMic: { type: \"string\" },\n        preferredCamera: { type: \"string\" },\n        muteMicOnEntry: { type: \"bool\" },\n        audioOutputMode: { type: \"string\" },\n        audioNormalization: { type: \"bool\" },\n        invertTouchscreenCameraMove: { type: \"bool\" },\n        enableOnScreenJoystickLeft: { type: \"bool\" },\n        enableOnScreenJoystickRight: { type: \"bool\" },\n        enableGyro: { type: \"bool\" },\n        onlyShowNametagsInFreeze: { type: \"bool\" },\n        animateWaypointTransitions: { type: \"bool\" },\n        showFPSCounter: { type: \"bool\" },\n        allowMultipleHubsInstances: { type: \"bool\" },\n        disableIdleDetection: { type: \"bool\" },\n        fastRoomSwitching: { type: \"bool\" },\n        preferMobileObjectInfoPanel: { type: \"bool\" },\n        maxResolutionWidth: { type: \"number\" },\n        maxResolutionHeight: { type: \"number\" },\n        globalVoiceVolume: { type: \"number\" },\n        globalMediaVolume: { type: \"number\" },\n        snapRotationDegrees: { type: \"number\" },\n        materialQualitySetting: { type: \"string\" },\n        enableDynamicShadows: { type: \"bool\" },\n        disableSoundEffects: { type: \"bool\" },\n        disableMovement: { type: \"bool\" },\n        disableBackwardsMovement: { type: \"bool\" },\n        disableStrafing: { type: \"bool\" },\n        disableTeleporter: { type: \"bool\" },\n        disableAutoPixelRatio: { type: \"bool\" },\n        movementSpeedModifier: { type: \"number\" },\n        disableEchoCancellation: { type: \"bool\" },\n        disableNoiseSuppression: { type: \"bool\" },\n        disableAutoGainControl: { type: \"bool\" },\n        locale: { type: \"string\" },\n        showRtcDebugPanel: { type: \"bool\" },\n        showAudioDebugPanel: { type: \"bool\" },\n        enableAudioClipping: { type: \"bool\" },\n        audioClippingThreshold: { type: \"number\" },\n        theme: { type: \"string\" },\n        thirdPersonMode: { type: \"bool\" },\n      },\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" },\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" },\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" },\n        },\n      },\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" },\n        },\n      },\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" },\n        },\n      },\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" },\n        },\n      },\n    },\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    preferences: { $ref: \"#/definitions/preferences\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" },\n  },\n\n  additionalProperties: false,\n};\n\nexport class Store extends EventTarget implements IService {\n  constructor() {\n    super();\n\n    if (typeof localStorage !== \"undefined\") {\n      if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n        localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n      }\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", (e) => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\") as any);\n    });\n  }\n\n  getType(): string {\n    return Store.name;\n  }\n\n  get state() {\n    if (!this[STORE_STATE_CACHE_KEY] && typeof localStorage !== \"undefined\") {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts = null) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      console.log(`Write to store failed schema validation.`);\n      //throw new Error(`Write to store failed schema validation.`);\n    }\n\n    if (typeof localStorage !== \"undefined\") {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    }\n    delete this[STORE_STATE_CACHE_KEY];\n\n    this.dispatchEvent(new CustomEvent(\"statechanged\") as any);\n\n    return finalState;\n  }\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'additionalItems': true,\n  'then': true,\n  'else': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true,\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      if(!v) return;\n      var id = v.$id || v.id;\n      return id ? ('<' + id + '>') : (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  var throwAll = options.throwAll;\n  options.throwError = false;\n  options.throwAll = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n  options.throwAll = throwAll;\n\n  if (!res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n    ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      var id = v.$id || v.id;\n      if(id) return '<' + id + '>';\n      return(v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var id = v.$id || v.id;\n      var msg = id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n    ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    var id = v.$id || v.id;\n    return id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates \"then\" or \"else\" depending on the result of validating \"if\"\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.if = function validateIf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) return null;\n  if (!helpers.isSchema(schema.if)) throw new Error('Expected \"if\" keyword to be a schema');\n  var ifValid = testSchemaNoThrow.call(this, instance, options, ctx, null, schema.if);\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var res;\n  if(ifValid){\n    if (schema.then === undefined) return;\n    if (!helpers.isSchema(schema.then)) throw new Error('Expected \"then\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.then, options, ctx.makeChild(schema.then));\n    result.importErrors(res);\n  }else{\n    if (schema.else === undefined) return;\n    if (!helpers.isSchema(schema.else)) throw new Error('Expected \"else\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.else, options, ctx.makeChild(schema.else));\n    result.importErrors(res);\n  }\n  return result;\n};\n\nfunction getEnumerableProperty(object, key){\n  // Determine if `key` shows up in `for(var key in object)`\n  // First test Object.hasOwnProperty.call as an optimization: that guarantees it does\n  if(Object.hasOwnProperty.call(object, key)) return object[key];\n  // Test `key in object` as an optimization; false means it won't\n  if(!(key in object)) return;\n  while( (object = Object.getPrototypeOf(object)) ){\n    if(Object.propertyIsEnumerable.call(object, key)) return object[key];\n  }\n}\n\n/**\n * Validates propertyNames\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.propertyNames = function validatePropertyNames (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var subschema = schema.propertyNames!==undefined ? schema.propertyNames : {};\n  if(!helpers.isSchema(subschema)) throw new SchemaError('Expected \"propertyNames\" to be a schema (object or boolean)');\n\n  for (var property in instance) {\n    if(getEnumerableProperty(instance, property) !== undefined){\n      var res = this.validateSchema(property, subschema, options, ctx.makeChild(subschema));\n      result.importErrors(res);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var subschema = properties[property];\n    if(subschema===undefined){\n      continue;\n    }else if(subschema===null){\n      throw new SchemaError('Unexpected null, expected schema in \"properties\"');\n    }\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, subschema, options, ctx);\n    }\n    var prop = getEnumerableProperty(instance, property);\n    var res = this.validateSchema(prop, subschema, options, ctx.makeChild(subschema, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existence tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"is not allowed to have the additional property \" + JSON.stringify(property),\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var subschema = patternProperties[pattern];\n      if(subschema===undefined){\n        continue;\n      }else if(subschema===null){\n        throw new SchemaError('Unexpected null, expected schema in \"patternProperties\"');\n      }\n      try {\n        var regexp = new RegExp(pattern, 'u');\n      } catch(_e) {\n        // In the event the stricter handling causes an error, fall back on the forgiving handling\n        // DEPRECATED\n        regexp = new RegExp(pattern);\n      }\n      if (!regexp.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, subschema, options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], subschema, options, ctx.makeChild(subschema, property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.items===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    if(Array.isArray(schema.items)){\n      var items =  schema.items[i]===undefined ? schema.additionalItems : schema.items[i];\n    }else{\n      var items = schema.items;\n    }\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates the \"contains\" keyword\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.contains = function validateContains (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.contains===undefined) return;\n  if (!helpers.isSchema(schema.contains)) throw new Error('Expected \"contains\" keyword to be a schema');\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var count = instance.some(function (value, i) {\n    var res = self.validateSchema(value, schema.contains, options, ctx.makeChild(schema.contains, i));\n    return res.errors.length===0;\n  });\n  if(count===false){\n    result.addError({\n      name: 'contains',\n      argument: schema.contains,\n      message: \"must contain an item matching given schema\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    if(!(instance > schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than \" + schema.minimum,\n      });\n    }\n  } else {\n    if(!(instance >= schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than or equal to \" + schema.minimum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    if(!(instance < schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than \" + schema.maximum,\n      });\n    }\n  } else {\n    if(!(instance <= schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than or equal to \" + schema.maximum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMinimum = function validateExclusiveMinimum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMinimum, which is handled by the \"minimum\" keyword.\n  if(typeof schema.exclusiveMinimum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance > schema.exclusiveMinimum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMinimum',\n      argument: schema.exclusiveMinimum,\n      message: \"must be strictly greater than \" + schema.exclusiveMinimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMaximum = function validateExclusiveMaximum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMaximum, which is handled by the \"maximum\" keyword.\n  if(typeof schema.exclusiveMaximum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance < schema.exclusiveMaximum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMaximum',\n      argument: schema.exclusiveMaximum,\n      message: \"must be strictly less than \" + schema.exclusiveMaximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument),\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatibility with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\",\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(getEnumerableProperty(instance, n)===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var pattern = schema.pattern;\n  try {\n    var regexp = new RegExp(pattern, 'u');\n  } catch(_e) {\n    // In the event the stricter handling causes an error, fall back on the forgiving handling\n    // DEPRECATED\n    regexp = new RegExp(pattern);\n  }\n  if (!instance.match(regexp)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern.toString()),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (schema.uniqueItems!==true) return;\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var id = type && (type.$id || type.id);\n      var schemaId = id || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, path, name, argument) {\n  if(Array.isArray(path)){\n    this.path = path;\n    this.property = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else if(path !== undefined){\n    this.property = path;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    var id = schema.$id || schema.id;\n    this.schema = id || schema;\n  }\n  if (instance !== undefined) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.options = options;\n  this.path = ctx.path;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.throwFirst = options && options.throwFirst;\n  this.throwAll = options && options.throwAll;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.path);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.path, detail.name, detail.argument);\n  }\n\n  this.errors.push(err);\n  if (this.throwFirst) {\n    throw new ValidatorResultError(this);\n  }else if(this.throwError){\n    throw err;\n  }\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    this.errors = this.errors.concat(res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\nmodule.exports.ValidatorResultError = ValidatorResultError;\nfunction ValidatorResultError(result) {\n  if(Error.captureStackTrace){\n    Error.captureStackTrace(this, ValidatorResultError);\n  }\n  this.instance = result.instance;\n  this.schema = result.schema;\n  this.options = result.options;\n  this.errors = result.errors;\n}\nValidatorResultError.prototype = new Error();\nValidatorResultError.prototype.constructor = ValidatorResultError;\nValidatorResultError.prototype.name = \"Validation Error\";\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  {\n    constructor: {value: SchemaError, enumerable: false},\n    name: {value: 'SchemaError', enumerable: false},\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, path, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  if(Array.isArray(path)){\n    this.path = path;\n    this.propertyPath = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else{\n    this.propertyPath = path;\n  }\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var path = (propertyName===undefined) ? this.path : this.path.concat([propertyName]);\n  var id = schema.$id || schema.id;\n  var base = uri.resolve(this.base, id||'');\n  var ctx = new SchemaContext(schema, this.options, path, base, Object.create(this.schemas));\n  if(id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n};\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  // 7.3.1. Dates, Times, and Duration\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n  'duration': /P(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S)|\\d+(D|M(\\d+D)?|Y(\\d+M(\\d+D)?)?)(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S))?|\\d+W)/i,\n\n  // 7.3.2. Email Addresses\n  // TODO: fix the email production\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'idn-email': /^(\"(?:[!#-\\[\\]-\\u{10FFFF}]|\\\\[\\t -\\u{10FFFF}])*\"|[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*)@([!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*|\\[[!-Z\\^-\\u{10FFFF}]*\\])$/u,\n\n  // 7.3.3. Hostnames\n\n  // 7.3.4. IP Addresses\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  // FIXME whitespace is invalid\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n\n  // 7.3.5. Resource Identifiers\n  // TODO: A more accurate regular expression for \"uri\" goes:\n  // [A-Za-z][+\\-.0-9A-Za-z]*:((/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?)?#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])|/?%[0-9A-Fa-f]{2}|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*(#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?)?\n  'uri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'uri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/,\n  'iri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'iri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\\u{10FFFF}]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/u,\n  'uuid': /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n\n  // 7.3.6. uri-template\n  'uri-template': /(%[0-9a-f]{2}|[!#$&(-;=?@\\[\\]_a-z~]|\\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?)*\\})*/iu,\n\n  // 7.3.7. JSON Pointers\n  'json-pointer': /^(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*$/iu,\n  'relative-json-pointer': /^\\d+(#|(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*)$/iu,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n\n  // 7.3.8. regex\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n\n  // Other definitions\n  // \"style\" was removed from JSON Schema in draft-4 and is deprecated\n  'style': /[\\r\\n\\t ]*[^\\r\\n\\t ][^:]*:[\\r\\n\\t ]*[^\\r\\n\\t ;]*[\\r\\n\\t ]*;?/,\n  // \"color\" was removed from JSON Schema in draft-4 and is deprecated\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/,\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e);\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e);\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key]);\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n}\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n  // ~ must be encoded explicitly because hacks\n  // the slash is encoded by encodeURIComponent\n  return a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\nexports.isSchema = function isSchema(val){\n  return (typeof val === 'object' && val) || (typeof val === 'boolean');\n};\n\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidatorResultError = require('./helpers').ValidatorResultError;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","\"use strict\";\n\nvar urilib = require('url');\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var id = schema.$id || schema.id;\n    var ourBase = id ? urilib.resolve(baseuri, id) : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+ourBase+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', (Array.isArray(schema.items)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', (Array.isArray(schema.extends)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!Array.isArray(schemas)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n};\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar ValidatorResultError = helpers.ValidatorResultError;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.$id || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    // If this schema is already defined, it will be filtered out by the next step\n    this.unresolvedRefs.push(uri);\n  }\n  // Remove newly defined schemas from unresolvedRefs\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!Array.isArray(schemas)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if((typeof schema !== 'boolean' && typeof schema !== 'object') || schema === null){\n    throw new SchemaError('Expected `schema` to be an object or boolean');\n  }\n  if (!options) {\n    options = {};\n  }\n  // This section indexes subschemas in the provided schema, so they don't need to be added with Validator#addSchema\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var id = schema.$id || schema.id;\n  var base = urilib.resolve(options.base||anonymousBase, id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, [], base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if(options.required && instance===undefined){\n    var result = new ValidatorResult(instance, schema, options, ctx);\n    result.addError('is required, but is undefined');\n    return result;\n  }\n  var result = this.validateSchema(instance, schema, options, ctx);\n  if (!result) {\n    throw new Error('Result undefined');\n  }else if(options.throwAll && result.errors.length){\n    throw new ValidatorResultError(result);\n  }\n  return result;\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (Array.isArray(schema['extends'])) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema = shouldResolve(schema);\n  if (switchSchema) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.path, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref = shouldResolve(schema);\n  if(ref) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n};\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if(type===undefined){\n    return;\n  }else if(type===null){\n    throw new SchemaError('Unexpected null in \"type\" keyword');\n  }\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance === 'object') && !(Array.isArray(instance)) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3641);\n"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__12__","utils","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","xhrAdapter","config","Promise","dispatchXhrRequest","resolve","reject","requestData","data","requestHeaders","headers","responseType","isFormData","request","XMLHttpRequest","auth","username","password","unescape","encodeURIComponent","Authorization","btoa","fullPath","baseURL","url","onloadend","responseHeaders","getAllResponseHeaders","response","responseText","status","statusText","open","method","toUpperCase","params","paramsSerializer","timeout","onreadystatechange","handleLoad","readyState","responseURL","indexOf","setTimeout","onabort","handleAbort","onerror","handleError","ontimeout","handleTimeout","timeoutErrorMessage","transitional","clarifyTimeoutError","isStandardBrowserEnv","xsrfValue","withCredentials","xsrfCookieName","read","undefined","xsrfHeaderName","forEach","setRequestHeader","val","key","toLowerCase","isUndefined","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","onCanceled","cancel","abort","send","bind","Axios","mergeConfig","createInstance","defaultConfig","context","instance","prototype","extend","axios","create","instanceConfig","defaults","Cancel","CancelToken","isCancel","all","promises","spread","isAxiosError","message","this","toString","__CANCEL__","executor","TypeError","resolvePromise","promiseExecutor","token","reason","throwIfRequested","source","c","value","InterceptorManager","dispatchRequest","validator","validators","interceptors","arguments","assertOptions","silentJSONParsing","boolean","forcedJSONParsing","requestInterceptorChain","synchronousRequestInterceptors","unshiftRequestInterceptors","interceptor","runWhen","synchronous","unshift","fulfilled","rejected","responseInterceptorChain","pushResponseInterceptors","push","chain","Array","apply","concat","length","shift","newConfig","onFulfilled","onRejected","error","getUri","replace","forEachMethodNoData","forEachMethodWithData","handlers","use","options","eject","id","fn","forEachHandler","h","isAbsoluteURL","combineURLs","requestedURL","enhanceError","code","Error","transformData","throwIfCancellationRequested","call","transformRequest","merge","common","cleanHeaderConfig","adapter","onAdapterResolution","transformResponse","onAdapterRejection","toJSON","name","description","number","fileName","lineNumber","columnNumber","stack","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","directMergeKeys","getMergedValue","target","isPlainObject","isArray","slice","mergeDeepProperties","prop","valueFromConfig2","defaultToConfig2","axiosKeys","otherKeys","Object","keys","filter","filterAxiosKeys","validateStatus","fns","transform","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","getDefaultAdapter","process","isArrayBuffer","isBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","stringifySafely","rawValue","parser","encoder","isString","JSON","parse","trim","e","stringify","strictJSONParsing","maxContentLength","maxBodyLength","thisArg","wrap","args","i","encode","serializedParams","parts","serialize","parseValue","v","isDate","toISOString","join","hashmarkIndex","relativeURL","standardBrowserEnv","write","expires","path","domain","secure","cookie","isNumber","Date","toGMTString","document","match","RegExp","decodeURIComponent","remove","now","test","payload","originURL","msie","navigator","userAgent","urlParsingNode","createElement","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","window","location","requestURL","parsed","normalizedName","processHeader","ignoreDuplicateOf","split","line","substr","callback","arr","pkg","type","thing","deprecatedWarnings","currentVerArr","version","isOlderVersion","thanVersion","pkgVersionArr","destVer","isDeprecated","formatMessage","opt","desc","opts","console","warn","schema","allowUnknown","result","getPrototypeOf","isFunction","obj","l","hasOwnProperty","constructor","FormData","ArrayBuffer","isView","pipe","URLSearchParams","product","assignValue","a","b","str","stripBOM","content","charCodeAt","PROPERTIES_SERVICE","STORE_SERVICE","COOKIE_STORE_SERVICE","PHX_AUTH_SERVICE","NAME_SERVICE","getServiceSync","getGlobalProperties","createHubChannelParams","permsToken","profile","pushSubscriptionEndpoint","isMobile","isMobileVR","isEmbed","hubInviteId","push_subscription_endpoint","auth_token","authToken","perms_token","mobile","embed","hmd","hub_invite_id","RoomServiceFactory","services","RoomService","getService","phoenixAuthService","store","properties","nameService","getType","parseUrl","urlObj","URL","origin","startsWith","roomSID","searchParams","get","createAndRedirectToNewHub","RETICULUM_SERVER","fetch","res","log","conf","ROOM_TOKEN_SERVICE","fetchSpokeProject","userId","cursor","fetchReticulumAuthenticated","fetchFavoriteRoom","hubId","state","credentials","connectToReticulum","socket","onClose","APP","retChannel","channel","hub_id","setGlobalReticulumChannel","receive","OAUTH_FLOW_PERMS_TOKEN_KEY","oauthFlowPermsToken","hubPhxChannel","hubChannelParamsForPermsToken","sceneId","createUrl","getReticulumFetchUrl","hub","generateHubName","scene_id","authorization","body","r","json","update","email","isLocalClient","setFavorite","createRoomEntry","sceneid","imageUrl","allow_remixing","attributions","title","creator","images","preview","project_id","Symbol","Validator","isMergeableObject","isNonNullObject","isSpecial","stringValue","isReactElement","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","emptyTarget","defaultArrayMerge","map","element","getKeys","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","symbol","propertyIsEnumerable","propertyIsOnObject","object","property","_","mergeObject","destination","propertyIsUnsafe","getMergeFunction","customMerge","arrayMerge","sourceIsArray","deepmergeAll","array","reduce","prev","next","deepmerge_1","helpers","ValidatorResult","SchemaError","attribute","testSchemaNoThrow","ctx","throwError","throwAll","validateSchema","valid","Function","getEnumerableProperty","testAdditionalProperty","types","additionalProperties","addError","argument","preValidateProperty","makeChild","importErrors","validateType","some","testType","list","$id","anyOf","validateAnyOf","inner","nestedErrors","allOf","validateAllOf","msg","errors","oneOf","validateOneOf","count","if","validateIf","isSchema","ifValid","else","propertyNames","validatePropertyNames","subschema","validateProperties","patternProperties","validatePatternProperties","pattern","regexp","_e","validateAdditionalProperties","minProperties","validateMinProperties","maxProperties","validateMaxProperties","items","validateItems","every","additionalItems","contains","validateContains","minimum","validateMinimum","exclusiveMinimum","maximum","validateMaximum","exclusiveMaximum","validateExclusiveMinimum","validateExclusiveMaximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","getDecimalPlaces","divisorDecimals","maxDecimals","Math","max","multiplier","pow","round","testArrays","j","len","deepCompareStrict","multipleOf","validateMultipleOf","divisibleBy","validateDivisibleBy","required","validateRequired","n","validatePattern","string","format","validateFormat","disableFormat","isFormat","minLength","validateMinLength","hsp","maxLength","validateMaxLength","minItems","validateMinItems","maxItems","validateMaxItems","uniqueItems","validateUniqueItems","dependencies","validateDependencies","dep","childContext","propertyPath","validateEnum","String","not","disallow","validateNot","notTypes","schemaId","uri","ValidationError","sum","item","makeSuffix","throwFirst","stringizer","ValidatorResultError","captureStackTrace","detail","err","validatorType","defineProperty","enumerable","SchemaContext","base","schemas","propertyName","FORMAT_REGEXPS","input","parseFloat","parseInt","isNaN","regex","ipv4","customFormats","deepMerger","dst","deepMerge","copyist","src","copyistWithDeepMerge","pathEncoder","aKeys","bKeys","objectGetPath","o","s","k","encodePath","encodePointer","decimalPlaces","Number","decimalParts","urilib","SchemaScanResult","found","ref","scan","scanSchema","baseuri","$ref","resolvedUri","ourBase","substring","scanArray","extends","scanObject","definitions","p","unresolvedRefs","attributes","shouldResolve","addSchema","ourUri","addSubSchemaArray","addSubSchema","addSubSchemaObject","setSchemas","getSchema","urn","validate","sch","schemaobj","schemaTraverser","superResolve","switchSchema","resolved","subctx","skipAttributes","ignoreProperties","validatorErr","allowUnknownAttributes","rewrite","fragment","testString","testNumber","isFinite","integer","testInteger","testBoolean","testArray","testNull","date","testDate","any","testAny","testObject","byteToHex","bytesToUuid","buf","offset","bth","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","whatwgRNG","rnds","mathRNG","random","rng","v4","ii","qs","sep","eq","maxKeys","kstr","vstr","x","idx","stringifyPrimitive","ks","decode","nodeType","freeGlobal","g","global","punycode","maxInt","regexPunycode","regexNonASCII","regexSeparators","floor","stringFromCharCode","fromCharCode","RangeError","mapDomain","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","out","basic","index","oldi","w","t","baseMinusT","codePoint","inputLength","bias","lastIndexOf","splice","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toASCII","toUnicode","util","Url","slashes","query","urlParse","urlResolve","relative","resolveObject","urlResolveObject","urlFormat","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","rest","simplePath","exec","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","ae","esc","escape","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","arg","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","__esModule","d","definition","globalThis","toStringTag","nmd","paths","children"],"sourceRoot":""}